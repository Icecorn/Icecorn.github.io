<!DOCTYPE html>
<html lang=en>
<head>
  <meta charset="utf-8">
  
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
  <meta name="renderer" content="webkit">
  <meta http-equiv="Cache-Control" content="no-transform" />
  <meta http-equiv="Cache-Control" content="no-siteapp" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="format-detection" content="telephone=no,email=no,adress=no">
  <!-- Color theme for statusbar -->
  <meta name="theme-color" content="#000000" />
  <!-- 强制页面在当前窗口以独立页面显示,防止别人在框架里调用页面 -->
  <meta http-equiv="window-target" content="_top" />
  
  
  <title>计算机网络--运输层 | Blog of Icecorn</title>
  <meta name="description" content="计算机网络–运输层1. 运输层基本概念运输层向应用层提供通信服务，在运输层中，通信的真正端点不是主机而是主机中的进程 网络层为主机之间提供逻辑通信，运输层为应用进程提供端到端的逻辑通信   运输层连个主要协议：  用户数据报协议UDP（不用连接） 传输控制协议TCP（面向连接）    运输层支持复用和分用，方法是使用协议端口号（端口） 这里的端口号是指软件端口，分为两大类：  服务器端使用的端口号">
<meta property="og:type" content="article">
<meta property="og:title" content="计算机网络--运输层">
<meta property="og:url" content="http://icecorn.github.io/2022/02/14/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C--%E8%BF%90%E8%BE%93%E5%B1%82/index.html">
<meta property="og:site_name" content="Blog of Icecorn">
<meta property="og:description" content="计算机网络–运输层1. 运输层基本概念运输层向应用层提供通信服务，在运输层中，通信的真正端点不是主机而是主机中的进程 网络层为主机之间提供逻辑通信，运输层为应用进程提供端到端的逻辑通信   运输层连个主要协议：  用户数据报协议UDP（不用连接） 传输控制协议TCP（面向连接）    运输层支持复用和分用，方法是使用协议端口号（端口） 这里的端口号是指软件端口，分为两大类：  服务器端使用的端口号">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://gitee.com/Icecorn/blogimages/raw/master/img/20200415155007.png">
<meta property="og:image" content="https://gitee.com/Icecorn/blogimages/raw/master/img/20200415155252.png">
<meta property="og:image" content="https://gitee.com/Icecorn/blogimages/raw/master/img/20200415161027.png">
<meta property="og:image" content="https://gitee.com/Icecorn/blogimages/raw/master/img/20200415164539.png">
<meta property="og:image" content="https://gitee.com/Icecorn/blogimages/raw/master/img/20200415181928.png">
<meta property="og:image" content="https://gitee.com/Icecorn/blogimages/raw/master/img/20200415182617.png">
<meta property="og:image" content="https://gitee.com/Icecorn/blogimages/raw/master/img/20200415183407.png">
<meta property="og:image" content="https://gitee.com/Icecorn/blogimages/raw/master/img/20200415184550.png">
<meta property="og:image" content="https://gitee.com/Icecorn/blogimages/raw/master/img/20200415185230.png">
<meta property="og:image" content="https://gitee.com/Icecorn/blogimages/raw/master/img/20200417165127.png">
<meta property="og:image" content="https://gitee.com/Icecorn/blogimages/raw/master/img/20200417184443.png">
<meta property="og:image" content="https://gitee.com/Icecorn/blogimages/raw/master/img/20200417190511.png">
<meta property="og:image" content="https://gitee.com/Icecorn/blogimages/raw/master/img/20200417200113.png">
<meta property="og:image" content="https://gitee.com/Icecorn/blogimages/raw/master/img/20200417201411.png">
<meta property="article:published_time" content="2022-02-14T06:16:07.000Z">
<meta property="article:modified_time" content="2022-06-29T10:20:45.416Z">
<meta property="article:author" content="Icecorn">
<meta property="article:tag" content="计算机网络">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://gitee.com/Icecorn/blogimages/raw/master/img/20200415155007.png">
  <!-- Canonical links -->
  <link rel="canonical" href="http://icecorn.github.io/2022/02/14/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C--%E8%BF%90%E8%BE%93%E5%B1%82/index.html">
  
    <link rel="alternate" href="/atom.xml" title="Blog of Icecorn" type="application/atom+xml">
  
  
    <link rel="icon" href="images/logo.jpg" type="image/x-icon">
  
  
<link rel="stylesheet" href="/css/style.css">

  
  
  
  
<meta name="generator" content="Hexo 5.4.2"></head>


<body class="main-center" itemscope itemtype="http://schema.org/WebPage">
  <header class="header" itemscope itemtype="http://schema.org/WPHeader">
  <div class="slimContent">
    <div class="navbar-header">
      
      
      <div class="profile-block text-center">
        <a id="avatar" href="https://github.com/Icecorn" target="_blank">
          <img class="img-circle img-rotate" src="/images/avatar.jpg" width="200" height="200">
        </a>
        <h2 id="name" class="hidden-xs hidden-sm">Icecorn</h2>
        <h3 id="title" class="hidden-xs hidden-sm hidden-md">Life is Fantastic ~</h3>
        <small id="location" class="text-muted hidden-xs hidden-sm"><i class="icon icon-map-marker"></i> DaLian, China</small>
      </div>
      
      <div class="search" id="search-form-wrap">

    <form class="search-form sidebar-form">
        <div class="input-group">
            <input type="text" class="search-form-input form-control" placeholder="Search" />
            <span class="input-group-btn">
                <button type="submit" class="search-form-submit btn btn-flat" onclick="return false;"><i class="icon icon-search"></i></button>
            </span>
        </div>
    </form>
    <div class="ins-search">
  <div class="ins-search-mask"></div>
  <div class="ins-search-container">
    <div class="ins-input-wrapper">
      <input type="text" class="ins-search-input" placeholder="Type something..." x-webkit-speech />
      <button type="button" class="close ins-close ins-selectable" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button>
    </div>
    <div class="ins-section-wrapper">
      <div class="ins-section-container"></div>
    </div>
  </div>
</div>


</div>
      <button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#main-navbar" aria-controls="main-navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
    </div>
    <nav id="main-navbar" class="collapse navbar-collapse" itemscope itemtype="http://schema.org/SiteNavigationElement" role="navigation">
      <ul class="nav navbar-nav main-nav menu-highlight">
        
        
        <li class="menu-item menu-item-home">
          <a href="/.">
            
            <i class="icon icon-home-fill"></i>
            
            <span class="menu-title">Home</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-archives">
          <a href="/archives">
            
            <i class="icon icon-archives-fill"></i>
            
            <span class="menu-title">Archives</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-categories">
          <a href="/categories">
            
            <i class="icon icon-folder"></i>
            
            <span class="menu-title">Categories</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-tags">
          <a href="/tags">
            
            <i class="icon icon-tags"></i>
            
            <span class="menu-title">Tags</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-about">
          <a href="/about">
            
            <i class="icon icon-cup-fill"></i>
            
            <span class="menu-title">About</span>
          </a>
        </li>
        
      </ul>
      
    </nav>
  </div>
</header>

  
    <aside class="sidebar" itemscope itemtype="http://schema.org/WPSideBar">
  <div class="slimContent">
    
      <div class="widget">
    <h3 class="widget-title">Board</h3>
    <div class="widget-body">
        <div id="board">
            <div class="content">
                <p>QAQ~</p>
            </div>
        </div>
    </div>
</div>

    
      
  <div class="widget">
    <h3 class="widget-title">Categories</h3>
    <div class="widget-body">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/C/">C++</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/C/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/">设计模式</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/ReadingNotes/">ReadingNotes</a><span class="category-list-count">25</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/ReadingNotes/C/">C++</a><span class="category-list-count">17</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/ReadingNotes/Linux/">Linux</a><span class="category-list-count">8</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/ReadingNotes/Linux/%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B/">系统编程</a><span class="category-list-count">1</span></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%9B%BE%E5%BD%A2%E5%AD%A6/">图形学</a><span class="category-list-count">8</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%9B%BE%E5%BD%A2%E5%AD%A6/%E6%B8%B2%E6%9F%93/">渲染</a><span class="category-list-count">3</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%B7%A5%E5%85%B7/">工具</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/">操作系统</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/">数据结构与算法</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/">计算机基础</a><span class="category-list-count">5</span></li></ul>
    </div>
  </div>


    
      
  <div class="widget">
    <h3 class="widget-title">Tags</h3>
    <div class="widget-body">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/C-Primer/" rel="tag">C++ Primer</a><span class="tag-list-count">13</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/C-%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86%E6%9C%BA%E5%88%B6/" rel="tag">C++内存管理机制</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Games-101/" rel="tag">Games-101</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Games-104/" rel="tag">Games-104</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux%E9%AB%98%E6%80%A7%E8%83%BD%E6%9C%8D%E5%8A%A1%E5%99%A8/" rel="tag">Linux高性能服务器</a><span class="tag-list-count">8</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Markdown/" rel="tag">Markdown</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Rasterizer/" rel="tag">Rasterizer</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/openGL/" rel="tag">openGL</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/shader/" rel="tag">shader</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/socket%E7%BC%96%E7%A8%8B/" rel="tag">socket编程</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%86%85%E5%AD%98%E6%B1%A0/" rel="tag">内存池</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F/" rel="tag">单例模式</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%A4%9A%E7%BA%BF%E7%A8%8B/" rel="tag">多线程</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%A4%9A%E8%BF%9B%E7%A8%8B/" rel="tag">多进程</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%80%9D%E7%BB%B4%E5%AF%BC%E5%9B%BE/" rel="tag">思维导图</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/" rel="tag">操作系统</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%B8%B8%E6%88%8F%E5%BC%95%E6%93%8E/" rel="tag">游戏引擎</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%AE%97%E6%B3%95/" rel="tag">算法</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/" rel="tag">计算机网络</a><span class="tag-list-count">6</span></li></ul>
    </div>
  </div>


    
      
  <div class="widget">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget-body tagcloud">
      <a href="/tags/C-Primer/" style="font-size: 14px;">C++ Primer</a> <a href="/tags/C-%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86%E6%9C%BA%E5%88%B6/" style="font-size: 13.33px;">C++内存管理机制</a> <a href="/tags/Games-101/" style="font-size: 13.17px;">Games-101</a> <a href="/tags/Games-104/" style="font-size: 13.5px;">Games-104</a> <a href="/tags/Linux%E9%AB%98%E6%80%A7%E8%83%BD%E6%9C%8D%E5%8A%A1%E5%99%A8/" style="font-size: 13.83px;">Linux高性能服务器</a> <a href="/tags/Markdown/" style="font-size: 13px;">Markdown</a> <a href="/tags/Rasterizer/" style="font-size: 13.17px;">Rasterizer</a> <a href="/tags/openGL/" style="font-size: 13px;">openGL</a> <a href="/tags/shader/" style="font-size: 13px;">shader</a> <a href="/tags/socket%E7%BC%96%E7%A8%8B/" style="font-size: 13.33px;">socket编程</a> <a href="/tags/%E5%86%85%E5%AD%98%E6%B1%A0/" style="font-size: 13px;">内存池</a> <a href="/tags/%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F/" style="font-size: 13px;">单例模式</a> <a href="/tags/%E5%A4%9A%E7%BA%BF%E7%A8%8B/" style="font-size: 13px;">多线程</a> <a href="/tags/%E5%A4%9A%E8%BF%9B%E7%A8%8B/" style="font-size: 13px;">多进程</a> <a href="/tags/%E6%80%9D%E7%BB%B4%E5%AF%BC%E5%9B%BE/" style="font-size: 13px;">思维导图</a> <a href="/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/" style="font-size: 13px;">操作系统</a> <a href="/tags/%E6%B8%B8%E6%88%8F%E5%BC%95%E6%93%8E/" style="font-size: 13.5px;">游戏引擎</a> <a href="/tags/%E7%AE%97%E6%B3%95/" style="font-size: 13px;">算法</a> <a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/" style="font-size: 13.67px;">计算机网络</a>
    </div>
  </div>

    
      
  <div class="widget">
    <h3 class="widget-title">Archive</h3>
    <div class="widget-body">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/06/">June 2022</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/05/">May 2022</a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/04/">April 2022</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/03/">March 2022</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/02/">February 2022</a><span class="archive-list-count">13</span></li></ul>
    </div>
  </div>


    
      
  <div class="widget">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget-body">
      <ul class="recent-post-list list-unstyled no-thumbnail">
        
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/C/">C++</a><i class="icon icon-angle-right"></i><a class="category-link" href="/categories/C/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/">设计模式</a>
              </p>
              <p class="item-title">
                <a href="/2022/06/29/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E4%B8%80%E6%96%87%E6%90%9E%E5%AE%9A%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F/" class="title">单例模式|一文搞懂单例模式！</a>
              </p>
              <p class="item-date">
                <time datetime="2022-06-29T09:25:10.000Z" itemprop="datePublished">2022-06-29</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/%E5%9B%BE%E5%BD%A2%E5%AD%A6/">图形学</a>
              </p>
              <p class="item-title">
                <a href="/2022/06/19/Games-104/Games104--%E6%B8%B2%E6%9F%93%E7%B3%BB%E7%BB%9F-%E6%B8%B2%E6%9F%93%E7%AE%A1%E7%BA%BF%E5%90%8E%E5%A4%84%E7%90%86%E7%AD%897/" class="title">Games-104|第七课-渲染管线-后处理-其他渲染知识</a>
              </p>
              <p class="item-date">
                <time datetime="2022-06-19T09:25:10.000Z" itemprop="datePublished">2022-06-19</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/%E5%9B%BE%E5%BD%A2%E5%AD%A6/">图形学</a>
              </p>
              <p class="item-title">
                <a href="/2022/06/16/Games-104/Games104--%E6%B8%B2%E6%9F%93%E7%B3%BB%E7%BB%9F-%E5%9C%B0%E5%BD%A2%E5%A4%A7%E6%B0%94%E5%92%8C%E4%BA%916/" class="title">Games-104|第六课-渲染系统-地形大气和云的渲染</a>
              </p>
              <p class="item-date">
                <time datetime="2022-06-16T09:25:10.000Z" itemprop="datePublished">2022-06-16</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/%E5%9B%BE%E5%BD%A2%E5%AD%A6/">图形学</a>
              </p>
              <p class="item-title">
                <a href="/2022/06/10/Games-104/Games104--%E6%B8%B2%E6%9F%93%E7%B3%BB%E7%BB%9F-%E5%85%89%E7%85%A7%E5%92%8C%E6%9D%90%E8%B4%A85/" class="title">Games-104|第五课-渲染系统-光照与材质</a>
              </p>
              <p class="item-date">
                <time datetime="2022-06-10T09:25:10.000Z" itemprop="datePublished">2022-06-10</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/%E5%9B%BE%E5%BD%A2%E5%AD%A6/">图形学</a>
              </p>
              <p class="item-title">
                <a href="/2022/06/07/Games-104/Games104-%E6%B8%B2%E6%9F%93%E7%B3%BB%E7%BB%9F-%E6%B8%B2%E6%9F%93%E6%95%B0%E6%8D%AE%E7%BB%84%E7%BB%874/" class="title">Games-104|第四课-渲染数据组织</a>
              </p>
              <p class="item-date">
                <time datetime="2022-06-07T09:25:10.000Z" itemprop="datePublished">2022-06-07</time>
              </p>
            </div>
          </li>
          
      </ul>
    </div>
  </div>
  

    
  </div>
</aside>

  
  
  <aside class="sidebar sidebar-toc collapse   in  " id="collapseToc" itemscope itemtype="http://schema.org/WPSideBar">
  <div class="slimContent">
    <nav id="toc" class="article-toc">
      <h3 class="toc-title">Catalogue</h3>
      <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E2%80%93%E8%BF%90%E8%BE%93%E5%B1%82"><span class="toc-number">1.</span> <span class="toc-text">计算机网络–运输层</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E8%BF%90%E8%BE%93%E5%B1%82%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5"><span class="toc-number">1.1.</span> <span class="toc-text">1. 运输层基本概念</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E7%94%A8%E6%88%B7%E6%95%B0%E6%8D%AE%E6%8A%A5%E5%8D%8F%E8%AE%AEUDP"><span class="toc-number">1.2.</span> <span class="toc-text">2 用户数据报协议UDP</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E4%BC%A0%E8%BE%93%E6%8E%A7%E5%88%B6%E5%8D%8F%E8%AE%AETCP"><span class="toc-number">1.3.</span> <span class="toc-text">3 传输控制协议TCP</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-TCP%E6%8A%A5%E6%96%87%E6%AE%B5%E9%A6%96%E9%83%A8%E6%A0%BC%E5%BC%8F"><span class="toc-number">1.4.</span> <span class="toc-text">4 TCP报文段首部格式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-%E5%8F%AF%E9%9D%A0%E4%BC%A0%E8%BE%93%E7%9A%84%E5%8E%9F%E7%90%86%E5%92%8C%E5%AE%9E%E7%8E%B0"><span class="toc-number">1.5.</span> <span class="toc-text">5 可靠传输的原理和实现</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-1-%E5%81%9C%E6%AD%A2%E7%AD%89%E5%BE%85%E5%8D%8F%E8%AE%AE"><span class="toc-number">1.5.1.</span> <span class="toc-text">5.1 停止等待协议</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-2-%E6%B5%81%E6%B0%B4%E7%BA%BF%E4%BC%A0%E8%BE%93"><span class="toc-number">1.5.2.</span> <span class="toc-text">5.2 流水线传输</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-3-%E6%BB%91%E5%8A%A8%E7%AA%97%E5%8F%A3%E5%8D%8F%E8%AE%AE"><span class="toc-number">1.5.3.</span> <span class="toc-text">5.3 滑动窗口协议</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-4-%E8%B6%85%E6%97%B6%E9%87%8D%E4%BC%A0%E6%97%B6%E9%97%B4%E7%9A%84%E9%80%89%E6%8B%A9"><span class="toc-number">1.5.4.</span> <span class="toc-text">5.4 超时重传时间的选择</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-5-%E9%80%89%E6%8B%A9%E7%A1%AE%E8%AE%A4SACK"><span class="toc-number">1.5.5.</span> <span class="toc-text">5.5 选择确认SACK</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-TCP%E6%B5%81%E9%87%8F%E6%8E%A7%E5%88%B6"><span class="toc-number">1.6.</span> <span class="toc-text">6 TCP流量控制</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-1-%E5%88%A9%E7%94%A8%E6%BB%91%E5%8A%A8%E7%AA%97%E5%8F%A3%E5%AE%9E%E7%8E%B0%E6%B5%81%E9%87%8F%E6%8E%A7%E5%88%B6"><span class="toc-number">1.6.1.</span> <span class="toc-text">6.1 利用滑动窗口实现流量控制</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-2-TCP%E7%9A%84%E4%BC%A0%E8%BE%93%E6%95%88%E7%8E%87"><span class="toc-number">1.6.2.</span> <span class="toc-text">6.2 TCP的传输效率</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-3-%E5%90%9E%E5%90%90%E9%87%8F"><span class="toc-number">1.6.3.</span> <span class="toc-text">6.3 吞吐量</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-TCP%E7%9A%84%E6%8B%A5%E5%A1%9E%E6%8E%A7%E5%88%B6"><span class="toc-number">1.7.</span> <span class="toc-text">7 TCP的拥塞控制</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#7-1-%E6%8B%A5%E5%A1%9E%E6%8E%A7%E5%88%B6%E6%A6%82%E5%BF%B5"><span class="toc-number">1.7.1.</span> <span class="toc-text">7.1 拥塞控制概念</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-2-TCP%E7%9A%84%E6%8B%A5%E5%A1%9E%E6%8E%A7%E5%88%B6%E6%96%B9%E6%B3%95"><span class="toc-number">1.7.2.</span> <span class="toc-text">7.2 TCP的拥塞控制方法</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-TCP%E7%9A%84%E8%BF%90%E8%BE%93%E8%BF%9E%E6%8E%A5%E7%AE%A1%E7%90%86"><span class="toc-number">1.8.</span> <span class="toc-text">8.TCP的运输连接管理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#8-1-%E8%BF%9E%E6%8E%A5%E5%BB%BA%E7%AB%8B"><span class="toc-number">1.8.1.</span> <span class="toc-text">8.1 连接建立</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-2-%E8%BF%9E%E6%8E%A5%E9%87%8A%E6%94%BE"><span class="toc-number">1.8.2.</span> <span class="toc-text">8.2 连接释放</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-3-TCP%E7%8A%B6%E6%80%81%E6%9C%BA"><span class="toc-number">1.8.3.</span> <span class="toc-text">8.3 TCP状态机</span></a></li></ol></li></ol></li></ol>
    </nav>
  </div>
</aside>

<main class="main" role="main">
  <div class="content">
  <article id="post-计算机网络/计算机网络--运输层" class="article article-type-post" itemscope itemtype="http://schema.org/BlogPosting">
    
    <div class="article-header">
      
        
  
    <h1 class="article-title" itemprop="name">
      计算机网络--运输层
    </h1>
  

      
      <div class="article-meta">
        <span class="article-date">
    <i class="icon icon-calendar-check"></i>
	<a href="/2022/02/14/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C--%E8%BF%90%E8%BE%93%E5%B1%82/" class="article-date">
	  <time datetime="2022-02-14T06:16:07.000Z" itemprop="datePublished">2022-02-14</time>
	</a>
</span>
        
  <span class="article-category">
    <i class="icon icon-folder"></i>
    <a class="article-category-link" href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/">计算机基础</a>
  </span>

        
  <span class="article-tag">
    <i class="icon icon-tags"></i>
	<a class="article-tag-link-link" href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/" rel="tag">计算机网络</a>
  </span>


        
	<span class="article-read hidden-xs">
	    <i class="icon icon-eye-fill" aria-hidden="true"></i>
	    <span id="busuanzi_container_page_pv">
			<span id="busuanzi_value_page_pv">0</span>
		</span>
	</span>


        <span class="post-comment"><i class="icon icon-comment"></i> <a href="/2022/02/14/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C--%E8%BF%90%E8%BE%93%E5%B1%82/#comments" class="article-comment-link">Comments</a></span>
        
	
		<span class="post-wordcount hidden-xs" itemprop="wordCount">Word Count: 4.7k(words)</span>
	
	
		<span class="post-readcount hidden-xs" itemprop="timeRequired">Read Count: 16(minutes)</span>
	

      </div>
    </div>
    <div class="article-entry marked-body" itemprop="articleBody">
      
        <h1 id="计算机网络–运输层"><a href="#计算机网络–运输层" class="headerlink" title="计算机网络–运输层"></a>计算机网络–运输层</h1><h2 id="1-运输层基本概念"><a href="#1-运输层基本概念" class="headerlink" title="1. 运输层基本概念"></a>1. 运输层基本概念</h2><p>运输层向应用层提供通信服务，在运输层中，<strong>通信的真正端点不是主机而是主机中的进程</strong></p>
<p>网络层为主机之间提供逻辑通信，运输层为应用进程提供端到端的逻辑通信</p>
<p><img src="https://gitee.com/Icecorn/blogimages/raw/master/img/20200415155007.png"></p>
<hr>
<p>运输层连个主要协议：</p>
<ul>
<li>用户数据报协议UDP（不用连接）</li>
<li>传输控制协议TCP（面向连接）</li>
</ul>
<p><img src="https://gitee.com/Icecorn/blogimages/raw/master/img/20200415155252.png" alt="使用这两种协议的应用及协议"></p>
<hr>
<p>运输层支持<strong>复用</strong>和<strong>分用</strong>，方法是使用<strong>协议端口号</strong>（端口）</p>
<p>这里的端口号是指软件端口，分为两大类：</p>
<ul>
<li><p>服务器端使用的端口号</p>
<p>1.熟知端口号（系统端口号）：  0~1023 比如FTP是21</p>
<p>2.登记算口号：  1024~49151  其他应用使用的</p>
</li>
<li><p>客户端使用的端口号</p>
<p>数值49152~65535  在客户进程运行时才动态选择，又叫<strong>短暂端口号</strong>  ，在不同主机可以随意分配</p>
</li>
</ul>
<hr>
<h2 id="2-用户数据报协议UDP"><a href="#2-用户数据报协议UDP" class="headerlink" title="2 用户数据报协议UDP"></a>2 用户数据报协议UDP</h2><p>UDP在IP数据报服务上增加了复用分用功能和差错检测功能</p>
<p>主要特点：</p>
<ul>
<li><strong>是无连接的</strong></li>
<li><strong>尽最大努力交付：</strong>  即不保证可靠交付</li>
<li><strong>是面向报文的：</strong>  意思是UDP接收到应用层报文不做任何操作仅仅加上UDP首部就构成了UDP报文，这就要求应用层控制报文大小（太大会导致IP报文需要分片，太小导致传输效率太低）</li>
<li><strong>没有拥塞控制</strong></li>
<li><strong>支持1对1,1对多，多对1，多对多的交互通信</strong></li>
<li><strong>首部开销小</strong>：  只有8字节</li>
</ul>
<hr>
<p>UDP 首部格式</p>
<p>首部共8字节，四个字段，分别是<strong>源端口</strong>  <strong>目的端口</strong>  <strong>长度</strong>（UDP报文总长度，最小为8只有首部）  <strong>检验和</strong>  每个字段2字节</p>
<p><img src="https://gitee.com/Icecorn/blogimages/raw/master/img/20200415161027.png"></p>
<p>伪首部只在计算检验和时被用于计算，检验方法类似IP数据报首部校验方法，<strong>区别是UDP的校验是把首部和数据部分一起都检验</strong></p>
<hr>
<h2 id="3-传输控制协议TCP"><a href="#3-传输控制协议TCP" class="headerlink" title="3 传输控制协议TCP"></a>3 传输控制协议TCP</h2><p>TCP具有可靠传输，流量控制，拥塞控制等等功能</p>
<p>主要特点：</p>
<ul>
<li><strong>面向连接</strong>：通信前必须建立TCP连接</li>
<li><strong>点对点</strong>：每一条TCP连接只能有两个端点，即只能1对1传输</li>
<li><strong>提供可靠交付</strong>： 无差错，不丢失，不重复，按序到达</li>
<li><strong>全双工通信</strong>：TCP连接两端设有<strong>发送缓存</strong>和<strong>接收缓存</strong></li>
<li><strong>面向字节流</strong>：对TCP来说应用程序发送的数据仅仅看成一连串<strong>无结构的字节流</strong>，TCP不理解这些玩意代表啥意思，只是必须把这些字节流按照顺序完整的传达到终点，它的任务就完成了。解析的活就交给终端处理就好</li>
</ul>
<p><strong>这里有一个UDP与TCP的差别就是，UDP发送的报文长度是应用进程给出的，而TCP是根据对方的窗口值和网络拥塞之类的自己判断（如果应用数据太长就分几段，太短就攒几个一起发）</strong></p>
<hr>
<p>TCP连接的端点叫<strong>套接字socket</strong>，将端口号拼接到IP地址就是套接字</p>
<p>比如 192.3.4.5:80</p>
<p>TCP把连接作为最基本的抽象，每条TCP连接唯一的被通信两端的套接字确定</p>
<p>TCP连接::={socket1,socket2}={(IP1:port1),(IP2,port2)}</p>
<hr>
<h2 id="4-TCP报文段首部格式"><a href="#4-TCP报文段首部格式" class="headerlink" title="4 TCP报文段首部格式"></a>4 TCP报文段首部格式</h2><p>TCP首部前20字节是固定的，后边可根据需要增加4n字节</p>
<p><img src="https://gitee.com/Icecorn/blogimages/raw/master/img/20200415164539.png" alt="TCP报文段首部格式"></p>
<ul>
<li><strong>源端口和目的端口</strong>：各占2字节，目的是实现分用</li>
<li><strong>序号</strong>：4字节，TCP是面向字节流的，所以该字段是指<strong>本报文段所发送的第一个字节的序号</strong></li>
<li><strong>确认号</strong>：4字节，是<strong>期望收到对方下一个报文段的第一个数据字节序号</strong></li>
<li><strong>数据偏移</strong>：4位，和IP数据报中的首部长度类似，表示的是TCP首部的实际长度（最大二进制15,4字节为单位，所以TCP首部最大也是60字节）</li>
<li><strong>保留</strong>：目前没用，置0</li>
<li><strong>紧急URG</strong>：1位，置1时代表高优先级优先发送</li>
<li><strong>确认ACK</strong>：1位，置1时才有效，TCP连接建立后所有报文ACK都为1</li>
<li><strong>推送PSH</strong>：1位，表示接收端收到就上交给应用层（不用少量信息攒一波），很少用</li>
<li><strong>复位RST</strong>：1位，TCP连接出现严重差错，该字段置1重建连接</li>
<li><strong>同步SYN</strong>：1位，建立连接时用来同步序号，置1表示这是一个连接请求或连接接受报文</li>
<li><strong>终止FIN</strong>：1位，用来释放一个连接，置1表示发送方数据发送完毕，请求释放运输连接</li>
<li><strong>窗口</strong>：2字节，是指发送本报文段的一方的<strong>接收窗口</strong></li>
<li><strong>检验和</strong>：2字节，检验首部和数据两部分，和UDP一样计算时也加伪首部</li>
<li><strong>紧急指针</strong>：2字节，仅在URG置1时有意义，指出<strong>紧急数据在的末尾在此报文段中的位置</strong></li>
<li><strong>选项</strong>：长度可变，最多40字节</li>
</ul>
<hr>
<h2 id="5-可靠传输的原理和实现"><a href="#5-可靠传输的原理和实现" class="headerlink" title="5 可靠传输的原理和实现"></a>5 可靠传输的原理和实现</h2><p>TCP是面向连接且可靠的传输协议，理想的传输协议需要具备以下两点：</p>
<ul>
<li>传输信道不产生差错</li>
<li> 不管发送方以多快的速度发送分组，接收端总能正确接收并处理</li>
</ul>
<hr>
<h3 id="5-1-停止等待协议"><a href="#5-1-停止等待协议" class="headerlink" title="5.1 停止等待协议"></a>5.1 停止等待协议</h3><p>停止等待是最简单的可靠传输，<strong>A发生完一个分组就停止发送等待对方的确认</strong></p>
<p><img src="https://gitee.com/Icecorn/blogimages/raw/master/img/20200415181928.png" alt="停止等待协议"></p>
<p><strong>超时重传</strong>：当发送方发送的分组出现差错没有送达接收方，就会启动<strong>超时重传机制</strong>，A每发送一个分组立刻设置一个<strong>超时计时器</strong>。这里有三点需要注意：</p>
<ul>
<li>A发送一个分组后，必须暂时保留该<strong>分组副本</strong>，收到确认后才删除</li>
<li>分组和确认分组都要进行<strong>编号</strong>，对于停止等待来说 0和1两个编号循环使用就行</li>
<li>超时重传时间应该设置的比<strong>数据传输的平均往返时间</strong>长一些</li>
</ul>
<p><img src="https://gitee.com/Icecorn/blogimages/raw/master/img/20200415182617.png" alt="确认丢失额确认迟到"></p>
<p>确认丢失时B忽略第二次收到的重复分组并发送确认给A</p>
<p>确认迟到B同样忽略第二次收到的重复分组，A忽略重复确认</p>
<p>这样我们就在不可靠的传输网络上实现了可靠通信，这种可靠传输协议叫做<strong>自动重传请求ARQ</strong></p>
<hr>
<h3 id="5-2-流水线传输"><a href="#5-2-流水线传输" class="headerlink" title="5.2 流水线传输"></a>5.2 流水线传输</h3><p>停止等待协议的优点是简单，但缺点是信道利用率太低，所以出现了流水线传输。流水线传输需要用到<strong>连续ARQ协议，回退N帧（gobackN）协议，滑动窗口协议等等</strong></p>
<hr>
<p>连续ARQ协议：</p>
<p><img src="https://gitee.com/Icecorn/blogimages/raw/master/img/20200415183407.png" alt="连续ARQ协议工作原理"></p>
<p>发送方根据接收方的<strong>窗口</strong>参数和<strong>自身的发送缓存</strong>决定窗口大小，窗口内的分组都是可以发送的，每收到一个确认窗口就向前移动一个分组</p>
<p><strong>累计确认</strong>：接收方不用每收到一个分组就发送一条确认，而是攒几个发送一个确认（<strong>按序到达的最后一个分组编号</strong>）即可。</p>
<p>累计确认的优点是<strong>容易实现</strong>，<strong>减少了通信量</strong>，<strong>即使确认丢失也不用重传</strong>。</p>
<p>累计确认的缺点是<strong>不能向发送方反应已经正确收到的所有分组信息</strong></p>
<p><strong>比如发送了前5个分组，接收方收到了1 2 4 5，那么接收方直接发送收到了2，这样发送方就必须重新发送3 4 5，哪怕4 5 已经收到了，这就叫做回退N帧协议（Go-back-N）</strong></p>
<hr>
<h3 id="5-3-滑动窗口协议"><a href="#5-3-滑动窗口协议" class="headerlink" title="5.3 滑动窗口协议"></a>5.3 滑动窗口协议</h3><p>滑动窗口协议其实就是<strong>以字节为单位</strong>的连续ARQ协议，但是研究的时候通常也可以以分组为单位研究</p>
<p><img src="https://gitee.com/Icecorn/blogimages/raw/master/img/20200415184550.png"></p>
<p><img src="https://gitee.com/Icecorn/blogimages/raw/master/img/20200415185230.png" alt="缓存与窗口的关系"></p>
<p>这里要注意以下几点：</p>
<ul>
<li>A<strong>根据B可接收的窗口大小</strong>和<strong>A的发送缓存大小</strong>（取较小值）来确定A的发送窗口，当然有时还可以根据<strong>拥塞状况</strong>适当减小。</li>
<li>发送窗口中已发送数据在<strong>没收到确认之前</strong>不能删除</li>
<li>接收方一定要支持<strong>累计确认</strong>功能，减小传输开销</li>
<li>TCP是全双工通信，通信双方都有发送窗口和接收窗口</li>
</ul>
<hr>
<h3 id="5-4-超时重传时间的选择"><a href="#5-4-超时重传时间的选择" class="headerlink" title="5.4 超时重传时间的选择"></a>5.4 超时重传时间的选择</h3><p>重传时间的选择是TCP中最复杂的问题，TCP采用一种自适应的算法线算出报文段的往返时间RTT，再计算一个加权平均往返时间RTTS。</p>
<p>不想写了，用到的话看书吧QAQ</p>
<hr>
<h3 id="5-5-选择确认SACK"><a href="#5-5-选择确认SACK" class="headerlink" title="5.5 选择确认SACK"></a>5.5 选择确认SACK</h3><p>若接收方收到的分组无差错，只是没按序号，或者只有中间的几个分组丢失了，能不能告诉发送方只发送这几个分组？</p>
<p>没错，这玩意就是解决这个问题的，要在TCP建立连接时在扩展首部里加上“允许SACK”选项</p>
<p>具体内容不写了，QAQ</p>
<hr>
<h2 id="6-TCP流量控制"><a href="#6-TCP流量控制" class="headerlink" title="6 TCP流量控制"></a>6 TCP流量控制</h2><h3 id="6-1-利用滑动窗口实现流量控制"><a href="#6-1-利用滑动窗口实现流量控制" class="headerlink" title="6.1 利用滑动窗口实现流量控制"></a>6.1 利用滑动窗口实现流量控制</h3><p>流量控制就是让发送方的发送速率不要太快，要让接收方来得及接收</p>
<p><img src="https://gitee.com/Icecorn/blogimages/raw/master/img/20200417165127.png"></p>
<p>TCP是面向字节流的，seq代表发送字节的序号，ACK是确认位，ack是确认编号，rwnd是<strong>接收端允许发送端发送的数据窗口大小</strong></p>
<p>图中最后rwnd置0，说明此时A不能再发送字节了，要是之后B发送重置rwnd时确认丢失，就会产生死锁，解决方案就是TCP的每条连接都有一个<strong>持续计时器</strong>，在发送端收到rwnd置0消息时开启，超时后发送端发送一个<strong>1字节的零窗口探测报文段</strong>，这样接收端就知道响应报文丢失了。</p>
<hr>
<h3 id="6-2-TCP的传输效率"><a href="#6-2-TCP的传输效率" class="headerlink" title="6.2 TCP的传输效率"></a>6.2 TCP的传输效率</h3><p>对于UDP来说，什么时候发送报文是应用程序决定的，UDP只需要原封不动的转发就行。但是对于TCP，应用进程把数据传送到TCP的发送缓存后就不管了，所以TCP是什么时候发送报文就是一个很重要的问题，有下面几种机制来发送：</p>
<ul>
<li>TCP维持一个<strong>最大报文段长度MSS</strong>变量，只要缓存中数据达到MSS字节就发送</li>
<li>发送方的应用进程指明要求发送报文段，即TCP支持<strong>推送</strong>操作</li>
<li>用一个计时器规定时间，到点发送</li>
</ul>
<p><strong>Nagle算法</strong>：发送方先发送<strong>第一个数据字节</strong>，将后续应用程序输入的字节保存在<strong>发送缓存</strong>，收到接收方的<strong>确认</strong>后，将攒了一波的数据发送出去（当然不能超过MSS），同时继续保存发送缓存。在收到接收方确认，再发送数据报。<strong>另外，当发送缓存中数据已经到达窗口大小的一半或已达到报文段的最大长度时，就立即发送一个报文段。</strong></p>
<p><strong>糊涂窗口综合症</strong>：  这个玩意是指TCP<strong>接收方的缓存</strong>已经满了，并且接受方的<strong>应用程序</strong>比较懒，一次处理一个字节，那么接收缓存每次仅仅空出一个字节还每次都发送确认（并把rwnd设置为1，导致发送方每次有效传输只有1字节），发送1字节还要加上TCP首部20字节，IP首部20字节，这样效率实在太低</p>
<p>解决方案可以<strong>让接收方等一会，等接收缓存空出来一个最大报文段或者等到接收缓存有一半以上空地方</strong></p>
<p>总结： 发送效率主要就是要减少40字节的首部的占比，所以记住发送方别发送太短的报文，接收方也别没事就发信号让发送方发报文就完事了。</p>
<hr>
<h3 id="6-3-吞吐量"><a href="#6-3-吞吐量" class="headerlink" title="6.3 吞吐量"></a>6.3 吞吐量</h3><p>吞吐量是指一个传输周期内传输的字节速率，注意单位是<strong>bit/s</strong>，经常会有和<strong>发送窗口</strong>相关的计算题</p>
<p>一个TCP连接下面使用256Kb/s的链路，其端到端时延为128ms。经测试，发现吞吐量只有120kb/s，则发送窗口大约是</p>
<p>A．3614字节<br>B．7228字节<br>C．57826字节<br>D．120k比特</p>
<p>本题目主要考查的是“TCP流量控制”。<br>为了提高报文段的传输效率，TCP采用大小可变的滑动窗口进行流量控制。窗口大小的单位为字节。发送窗口在连接建立时由双方商定。但在通信的过程中，接收端可根据自己的资源情况，随时动态地调整对方的发送窗口上限值。发送端利用发送窗口调节向网络注入分组的速率不仅是为了使接收端来得及接收，而且还是为了对网络进行拥塞控制。在每一个运输连接上报文段是断续发送的，这样就有了两种速率。一种是链路层的数据率，另一种是从运输层看到的数据注入速率。<br>题目中给出端到端时延为128ms，则在一个传输周期里，从发送第一个报文段到收到所有确认时间为：W/R+2<em>T，其中w为发送窗口的大小，R为链路速率，T为端到端时延。因此吞吐量TP=W/(W/R+2</em>T)，将题目中的具体数据代入，即可求得W=7228字节。</p>
<hr>
<h2 id="7-TCP的拥塞控制"><a href="#7-TCP的拥塞控制" class="headerlink" title="7 TCP的拥塞控制"></a>7 TCP的拥塞控制</h2><h3 id="7-1-拥塞控制概念"><a href="#7-1-拥塞控制概念" class="headerlink" title="7.1 拥塞控制概念"></a>7.1 拥塞控制概念</h3><p><strong>拥塞控制就是防止过多的数据注入到网络中，这样可以使网络中的路由器或链路不会过载</strong></p>
<p>拥塞控制和流量控制的区别是：拥塞控制涉及到是整条通信线路上所有的资源（主机，路由器，链路等等），所以需要控制调整的措施也比较复杂。而<strong>流量控制是端到端的交流</strong>，就是接收端告诉发送端你慢点，我吃不消了QAQ</p>
<p>拥塞控制主要分为两种方法：</p>
<ul>
<li><strong>开环控制</strong>：在设计网络时将会导致拥塞的因素都考虑到，运行时就基本不能改了</li>
<li><strong>闭环控制</strong>：基于反馈环路，几种措施 </li>
</ul>
<p>​             1.监测网络拥塞发生在何处</p>
<p>​             2.把拥塞信息传达到可以采取行动的地方</p>
<p>​             3.调整网络系统的运行解决问题</p>
<hr>
<h3 id="7-2-TCP的拥塞控制方法"><a href="#7-2-TCP的拥塞控制方法" class="headerlink" title="7.2 TCP的拥塞控制方法"></a>7.2 TCP的拥塞控制方法</h3><p>TCP进行拥塞控制的算法有四种：<strong>慢开始</strong>  <strong>拥塞避免</strong>  <strong>快重传</strong>  <strong>快恢复</strong></p>
<p>首先，发送当要维持一个<strong>拥塞窗口cnwd变量</strong>，<strong>发送方让自己的发送窗口等于拥塞窗口</strong>，cnwd的单位是<strong>发送方的最大报文段SMSS</strong>，一般初始设置为1。</p>
<p><strong>慢开始</strong>：意思就是初始cnwd设置为1，然后以指数方式增长</p>
<p><strong>拥塞避免</strong>：当cnwd超过预设门限值ssthresh时，改为线性增大，尽量避免拥塞发生</p>
<p><strong>快重传</strong>：  为了避免发送方一检测到<strong>超时</strong>就进行慢开始（有时候超时不意味着拥塞），快重传就是说发送方收到连续3次确认（因为中间一个数据报丢了，后边的收到了累计确认），这时发送方直接重传丢失数据报</p>
<p><strong>快恢复</strong>：  3ACK后不进行慢开始，而是直接把cnwd置为一半</p>
<p><img src="https://gitee.com/Icecorn/blogimages/raw/master/img/20200417184443.png" alt="TCP拥塞控制流程"></p>
<p>这就是所谓的<strong>加法增大，乘法减小</strong></p>
<p>另外<strong>发送窗口</strong>大小还取决于接收方的<strong>通知窗口</strong>，所以<strong>发送窗口</strong>取值=MIN[rnwd,cnwd]</p>
<hr>
<p><strong>主动队列管理AQM</strong></p>
<p>在通信链路中的路由器中，路由器缓存队列一般都是<strong>先进先出</strong>，而一旦发生拥塞后来的分组就会被路由器丢弃，那么发送方就会进行<strong>慢开始</strong>，而由于TCP的<strong>复用</strong>特性（路由器接到的都是IP数据报，同一个IP地址可能包装了不同的端口号），这就会导致一时间整个网络很多的TCP连接都<strong>慢开始</strong>了，这种现象叫<strong>全局同步</strong>，严重影响了传送效率</p>
<p>而AQM就是解决这个问题的，AQM其中一种方法叫<strong>随机早期检测RED</strong>，其实就是给路由器的缓存设置一个门限值，不让它到满了的时候再丢弃，用一个随机算法在它超过门限时就随机丢弃，这就保证了不是所有TCP都会同时慢开始了。</p>
<hr>
<h2 id="8-TCP的运输连接管理"><a href="#8-TCP的运输连接管理" class="headerlink" title="8.TCP的运输连接管理"></a>8.TCP的运输连接管理</h2><p>TCP连接三个阶段：连接建立，数据传送，连接释放</p>
<p>TCP连接建立采用<strong>客户服务器</strong>方式</p>
<h3 id="8-1-连接建立"><a href="#8-1-连接建立" class="headerlink" title="8.1 连接建立"></a>8.1 连接建立</h3><p>就是著名的<strong>三次握手</strong>啦</p>
<p><img src="https://gitee.com/Icecorn/blogimages/raw/master/img/20200417190511.png"></p>
<ul>
<li>SYN报文不允许携带数据，但是<strong>消耗一个序号</strong></li>
<li>ACK报文<strong>携带数据的话消耗序号，不携带的话不消耗序号</strong></li>
</ul>
<p>为什么最后A一定要在发送一次确认给B呢？</p>
<p>这是因为假设A发送请求滞留在路由器里导致超时了，这是A以为报文丢了就重发了一个请求与B建立了连接通信后又断开连接。然后这是A的第一个请求报文到达了B，B就会发送确认给A，此时A知道已经连接完了不搭理B，但B还会傻傻的等着A给他发消息，这就浪费了很多资源。</p>
<hr>
<h3 id="8-2-连接释放"><a href="#8-2-连接释放" class="headerlink" title="8.2 连接释放"></a>8.2 连接释放</h3><p>四次挥手</p>
<p><img src="https://gitee.com/Icecorn/blogimages/raw/master/img/20200417200113.png"></p>
<ul>
<li>FIN不携带数据，但是消耗序号</li>
<li>ACK不携带数据不消耗序号，携带消耗</li>
</ul>
<p>MSL叫做<strong>最长报文段寿命</strong>，为什么time-wait状态后要有2MSL等待时间呢？</p>
<p>1.因为B再发送完FIN-ACK确认报文后还在等着A发送确认，而A的最后一个确认报文可能会丢失，丢失了B收不到确认就会发送重传，此时如果没有2MSL时间A直接结束了连接，B就会一直发确认，资源浪费</p>
<p>2.就是上边提到的A重复发送连接请求，第一个请求延迟到达了的情况，有了2MSL就能使本连接持续时间内产生的所有报文段都从网络中消失</p>
<p><strong>保活计时器</strong>：有时候建立连接后客户端突然挂掉，这是服务器就会一直等着，所以要有这个保活计时器，服务器没收到一次数据就重置保活计时器，时间大约2小时，2小时没有新的数据，服务器就发送一个探测报文段，每75s发送一次，连续10次无反应服务器就关闭连接</p>
<hr>
<h3 id="8-3-TCP状态机"><a href="#8-3-TCP状态机" class="headerlink" title="8.3 TCP状态机"></a>8.3 TCP状态机</h3><p><img src="https://gitee.com/Icecorn/blogimages/raw/master/img/20200417201411.png"></p>

      
    </div>
    <div class="article-footer">
      <blockquote class="mt-2x">
  <ul class="post-copyright list-unstyled">
    
    <li class="post-copyright-link hidden-xs">
      <strong>本文链接：</strong>
      <a href="http://icecorn.github.io/2022/02/14/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C--%E8%BF%90%E8%BE%93%E5%B1%82/" title="计算机网络--运输层" target="_blank" rel="external">http://icecorn.github.io/2022/02/14/计算机网络/计算机网络--运输层/</a>
    </li>
    
    <li class="post-copyright-license">
      <strong>版权声明： </strong> 本博客所有文章除特别声明外，均采用 <a href="http://creativecommons.org/licenses/by/4.0/deed.zh" target="_blank" rel="external">CC BY 4.0 CN协议</a> 许可协议。转载请注明出处！
    </li>
  </ul>
</blockquote>


<div class="panel panel-default panel-badger">
  <div class="panel-body">
    <figure class="media">
      <div class="media-left">
        <a href="https://github.com/Icecorn" target="_blank" class="img-burn thumb-sm visible-lg">
          <img src="/images/avatar.jpg" class="img-rounded w-full" alt="">
        </a>
      </div>
      <div class="media-body">
        <h3 class="media-heading"><a href="https://github.com/Icecorn" target="_blank"><span class="text-dark">Icecorn</span><small class="ml-1x">Life is Fantastic ~</small></a></h3>
        <div>一个喜欢推理小说和coding的宝可梦训练家~</div>
      </div>
    </figure>
  </div>
</div>


    </div>
  </article>
  
    
  <section id="comments">
  	
      <div id="vcomments"></div>
    
  </section>


  
</div>

  <nav class="bar bar-footer clearfix" data-stick-bottom>
  <div class="bar-inner">
  
  <ul class="pager pull-left">
    
    <li class="prev">
      <a href="/2022/02/16/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C--%E5%BA%94%E7%94%A8%E5%B1%82/" title="计算机网络--应用层"><i class="icon icon-angle-left" aria-hidden="true"></i><span>&nbsp;&nbsp;Newer</span></a>
    </li>
    
    
    <li class="next">
      <a href="/2022/02/13/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C--%E7%BD%91%E7%BB%9C%E5%B1%82/" title="计算机网络--网络层"><span>Older&nbsp;&nbsp;</span><i class="icon icon-angle-right" aria-hidden="true"></i></a>
    </li>
    
    
    <li class="toggle-toc">
      <a class="toggle-btn " data-toggle="collapse" href="#collapseToc" aria-expanded="false" title="Catalogue" role="button">    <span>[&nbsp;</span><span>Catalogue</span>
        <i class="text-collapsed icon icon-anchor"></i>
        <i class="text-in icon icon-close"></i>
        <span>]</span>
      </a>
    </li>
    
  </ul>
  
  
  
  <div class="bar-right">
    
    <div class="share-component" data-sites="weibo,qq,wechat,facebook,twitter" data-mobile-sites="weibo,qq,qzone"></div>
    
  </div>
  </div>
</nav>
  


</main>

  <footer class="footer" itemscope itemtype="http://schema.org/WPFooter">
	
    <div class="copyright">
    	
        &copy; 2022 Icecorn
        
        <div class="publishby">
        	Theme by <a href="https://github.com/cofess" target="_blank"> cofess </a>base on <a href="https://github.com/cofess/hexo-theme-pure" target="_blank">pure</a>.
        </div>
    </div>
</footer>
  <script src="//cdn.jsdelivr.net/npm/jquery@1.12.4/dist/jquery.min.js"></script>
<script>
window.jQuery || document.write('<script src="js/jquery.min.js"><\/script>')
</script>

<script src="/js/plugin.min.js"></script>


<script src="/js/application.js"></script>


    <script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: 'Posts',
            PAGES: 'Pages',
            CATEGORIES: 'Categories',
            TAGS: 'Tags',
            UNTITLED: '(Untitled)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>

<script src="/js/insight.js"></script>






   
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>





   
    
  <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/valine"></script>
  <script type="text/javascript">
  var GUEST = ['nick', 'mail', 'link'];
  var meta = 'nick,mail,link';
  meta = meta.split(',').filter(function(item) {
    return GUEST.indexOf(item) > -1;
  });
  new Valine({
    el: '#vcomments',
    verify: false,
    notify: false,
    appId: '',
    appKey: '',
    placeholder: 'Just go go',
    avatar: 'mm',
    meta: meta,
    pageSize: '10' || 10,
    visitor: false
  });
  </script>

     







</body>
</html>